/*
 * mde-swipe-to-refresh 0.0.3
 * Swipe to refresh (pull to refresh) for Angular Material
 * https://github.com/alirezamirian/angular-material-swipe-to-refresh
*/

!function(e){"use strict";e.module("mde.swipeToRefresh",[]).constant("mdeSwipeToRefreshConfig",{threshold:80})}(angular),function(e){"use strict";function t(t,o,s){function i(i,l,m,a){function c(e){i.state==r.None&&(h=e.touches[0].pageY,l.one("touchend",u),l.bind("touchmove",d),0==p[0].scrollTop&&(i.progress=0,i.movement=0,i.$digest()))}function d(e){if(!(p[0].scrollTop>0)){var t=e.touches[0].pageY-h;t>0&&i.state!=r.Pulling&&(h=e.touches[0].pageY,t=0,i.state=r.Pulling),i.state==r.Pulling&&e.preventDefault(),t>0?(i.movement=Math.min(n(t,i.mdeThreshold)),i.progress=Math.min(i.movement/i.mdeThreshold,1),i.$digest()):i.movement>0&&(i.movement=0,i.progress=0,i.$digest())}}function u(n){l.unbind("touchmove",d),i.$apply(function(){1==i.progress?(i.state=r.Updating,i.movement=i.mdeThreshold,t.when((i.mdeOnRefresh||e.noop)())["finally"](function(){i.state=r.None,i.movement=0,i.progress=0})):(i.movement>0&&((i.mdeOnCancel||e.noop)(),i.movement=0,i.progress=0),o(function(){i.state=r.None},100))})}l.bind("touchstart",c);var p,h;if(a)p=a.getElement();else if(i.mdeScrollHostSelector){for(var g=l.parent();g[0]!=document.body;)if(g=g.parent(),g[0].matches(i.mdeScrollHostSelector)){p=g;break}p=p||g}else p=e.element(document.body);i.mdeThreshold=i.mdeThreshold||s.threshold,i.State=r,i.progress=0,i.state=r.None}return{restrict:"A",require:"?^mdeSwipeToRefreshScrollHost",transclude:!0,scope:{mdeOnRefresh:"&?",mdeOnCancel:"&?",mdeScrollHostSelector:"@?",mdeThreshold:"=?"},templateUrl:"swipe-to-refresh/swipe-to-refresh.html",link:i}}function n(e,t){return 2*t*o((e+t)/t)}function o(e){return Math.log(e)/Math.LN10}t.$inject=["$q","$timeout","mdeSwipeToRefreshConfig"],e.module("mde.swipeToRefresh").directive("mdeSwipeToRefresh",t);var r={None:"None",Updating:"Updating",Pulling:"Pulling"}}(angular),function(e){"use strict";function t(){function e(e){function t(){return e}this.getElement=t}return e.$inject=["$element"],{restrict:"A",controller:e}}e.module("mde.swipeToRefresh").directive("mdeSwipeToRefreshScrollHost",t)}(angular),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t.item(n)!==this;);return n>-1}),function(e){try{e=angular.module("mde.swipeToRefresh")}catch(t){e=angular.module("mde.swipeToRefresh",[])}e.run(["$templateCache",function(e){e.put("swipe-to-refresh/swipe-to-refresh.html",'<div\n     class="_indicator-wrap" layout="column" layout-align="center center"\n     ng-style="{top: -50 + movement + \'px\'}">\n    <span class="md-whiteframe-2dp _indicator" ng-if="state == State.Pulling">\n        <md-progress-circular\n                md-diameter="20" value="{{progress*80}}"\n                ng-style="{transform: \'rotate(\' + movement*1.8 + \'deg)\', opacity: progress == 1 ? 1 : .4}">\n        </md-progress-circular>\n    </span>\n    <!--\n    We use ng-show because ng-if will destroy md-progress-circular scope and it will no longer spin while it\'s\n    fading out. It event don\'t freezes in it\'s last state.\n    -->\n    <span class="md-whiteframe-2dp _indicator _updating" ng-show="state == State.Updating">\n        <md-progress-circular md-diameter="21" md-mode="indeterminate"></md-progress-circular>\n    </span>\n</div>\n<div ng-transclude></div>\n')}])}();