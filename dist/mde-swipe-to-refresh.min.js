/*
 * mde-swipe-to-refresh 0.0.4
 * Swipe to refresh (pull to refresh) for Angular Material
 * https://github.com/alirezamirian/angular-material-swipe-to-refresh
*/

!function(e){"use strict";e.module("mde.swipeToRefresh",[]).constant("mdeSwipeToRefreshConfig",{threshold:80})}(angular),function(e){"use strict";function t(t,o,s){function i(t){return e.isDefined(t.originalEvent)?t.originalEvent:t}function l(l,a,m,c){function d(e){l.state==r.None&&(g=i(e).touches[0].pageY,a.one("touchend",p),a.bind("touchmove",u),0==h[0].scrollTop&&(l.progress=0,l.movement=0,l.$digest()))}function u(e){if(!(h[0].scrollTop>0)){var t=i(e).touches[0].pageY-g;t>0&&l.state!=r.Pulling&&(g=i(e).touches[0].pageY,t=0,l.state=r.Pulling),l.state==r.Pulling&&e.preventDefault(),t>0?(l.movement=Math.min(n(t,l.mdeThreshold)),l.progress=Math.min(l.movement/l.mdeThreshold,1),l.$digest()):l.movement>0&&(l.movement=0,l.progress=0,l.$digest())}}function p(n){a.unbind("touchmove",u),l.$apply(function(){1==l.progress?(l.state=r.Updating,l.movement=l.mdeThreshold,t.when((l.mdeOnRefresh||e.noop)())["finally"](function(){l.state=r.None,l.movement=0,l.progress=0})):(l.movement>0&&((l.mdeOnCancel||e.noop)(),l.movement=0,l.progress=0),o(function(){l.state=r.None},100))})}a.bind("touchstart",d);var h,g;if(c)h=c.getElement();else if(l.mdeScrollHostSelector){for(var f=a.parent();f[0]!=document.body;)if(f=f.parent(),f[0].matches(l.mdeScrollHostSelector)){h=f;break}h=h||f}else h=e.element(document.body);l.mdeThreshold=l.mdeThreshold||s.threshold,l.State=r,l.progress=0,l.state=r.None}return{restrict:"A",require:"?^mdeSwipeToRefreshScrollHost",transclude:!0,scope:{mdeOnRefresh:"&?",mdeOnCancel:"&?",mdeScrollHostSelector:"@?",mdeThreshold:"=?"},templateUrl:"swipe-to-refresh/swipe-to-refresh.html",link:l}}function n(e,t){return 2*t*o((e+t)/t)}function o(e){return Math.log(e)/Math.LN10}t.$inject=["$q","$timeout","mdeSwipeToRefreshConfig"],e.module("mde.swipeToRefresh").directive("mdeSwipeToRefresh",t);var r={None:"None",Updating:"Updating",Pulling:"Pulling"}}(angular),function(e){"use strict";function t(){function e(e){function t(){return e}this.getElement=t}return e.$inject=["$element"],{restrict:"A",controller:e}}e.module("mde.swipeToRefresh").directive("mdeSwipeToRefreshScrollHost",t)}(angular),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t.item(n)!==this;);return n>-1}),function(e){try{e=angular.module("mde.swipeToRefresh")}catch(t){e=angular.module("mde.swipeToRefresh",[])}e.run(["$templateCache",function(e){e.put("swipe-to-refresh/swipe-to-refresh.html",'<div\n     class="_indicator-wrap" layout="column" layout-align="center center"\n     ng-style="{top: -50 + movement + \'px\'}">\n    <span class="md-whiteframe-2dp _indicator" ng-if="state == State.Pulling">\n        <md-progress-circular\n                md-diameter="20" value="{{progress*80}}"\n                ng-style="{transform: \'rotate(\' + movement*1.8 + \'deg)\', opacity: progress == 1 ? 1 : .4}">\n        </md-progress-circular>\n    </span>\n    <!--\n    We use ng-show because ng-if will destroy md-progress-circular scope and it will no longer spin while it\'s\n    fading out. It event don\'t freezes in it\'s last state.\n    -->\n    <span class="md-whiteframe-2dp _indicator _updating" ng-show="state == State.Updating">\n        <md-progress-circular md-diameter="21" md-mode="indeterminate"></md-progress-circular>\n    </span>\n</div>\n<div ng-transclude></div>\n')}])}();